# ๐ค Telegram Product Scraper

ูุธุงู ุณูุฑุงุจููุฌ ููุชุฌุงุช ูู ูููุงุช Telegram ูุฅุฑุณุงููุง ููู Backend

## ๐ ุงููุชุทูุจุงุช

1. **Telegram API Credentials**
   - ุงุฐูุจ ุฅูู: https://my.telegram.org/apps
   - ุณุฌู ุฏุฎูู ุจุฑูู ุชููุฌุฑุงูู
   - ุฃูุดุฆ ุชุทุจูู ุฌุฏูุฏ ูุงุญุตู ุนูู `api_id` ู `api_hash`

2. **Python 3.11+** (ููุชุทููุฑ ุงููุญูู)
3. **Docker & Docker Compose** (ููู Production)
4. **Coolify v4** account

## ๐ ุงูุชุดุบูู ุงููุญูู

### 1. ุงูุฅุนุฏุงุฏ ุงูุฃููู

```bash
# Clone the repository
git clone <your-repo>
cd telegram-scraper

# ุฅูุดุงุก virtual environment
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ุฃู
venv\Scripts\activate  # Windows

# ุชุซุจูุช ุงูููุชุจุงุช
pip install -r requirements.txt

# ุฅูุดุงุก ููู .env
cp .env.example .env
# ุนุฏู ุงูููู ูุถุน ุจูุงูุงุชู
```

### 2. ุชุนุฏูู ููู .env

```env
TELEGRAM_API_ID=123456
TELEGRAM_API_HASH=your_hash_here
TELEGRAM_PHONE=+201234567890
BACKEND_URL=http://localhost:8000/api/products
```

### 3. ุงูุชุดุบูู

```bash
# ุณูุฑุงุจููุฌ ุงูุฑุณุงุฆู ุงููุฏููุฉ (ุขุฎุฑ 100 ุฑุณุงูุฉ)
python scraper.py

# ุงููุฑุงูุจุฉ ุงููุจุงุดุฑุฉ ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ
# ุนุฏู ูู scraper.py: mode='live'
python scraper.py
```

**ููุงุญุธุฉ ูููุฉ**: ุนูุฏ ุฃูู ุชุดุบููุ ุณุชุทูุจ ููู Telegram ููุฏ ุงูุชุญูู ุงููุฑุณู ูุฑููู.

## ๐ณ Deployment ุนูู Coolify v4

### 1. ุฅุนุฏุงุฏ ุงููุดุฑูุน ูู Coolify

```bash
# ุฑูุน ุงูููุฏ ุนูู Git repository (GitHub/GitLab)
git init
git add .
git commit -m "Initial commit"
git remote add origin <your-git-repo>
git push -u origin main
```

### 2. ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ูู Coolify

1. ุงุฐูุจ ุฅูู Coolify Dashboard
2. ุงุถุบุท **+ New Resource**
3. ุงุฎุชุฑ **Public Repository**
4. ุงูุตู ุฑุงุจุท ุงูู Git repository
5. ุงุฎุชุฑ **Dockerfile** ูู Build Pack

### 3. ุฅุนุฏุงุฏ Environment Variables

ูู Coolifyุ ุงุฐูุจ ุฅูู **Environment Variables** ูุฃุถู:

```
TELEGRAM_API_ID=123456
TELEGRAM_API_HASH=your_hash_here
TELEGRAM_PHONE=+201234567890
BACKEND_URL=https://your-backend.com/api/products
```

### 4. ุฅุนุฏุงุฏ Volumes (ูุญูุธ ุงูุจูุงูุงุช)

ูู Coolify:
- **Volumes** โ Add Volume
  - `/app/downloaded_images` โ ูุญูุธ ุงูุตูุฑ
  - `/app/scraper_session.session` โ ูุญูุธ ุงูู session

### 5. Deploy

ุงุถุบุท **Deploy** ูุงูุชุธุฑ ุญุชู ููุชูู ุงูุจูุงุก ูุงูุชุดุบูู.

## ๐ ูุดููุฉ ุงูู Session ูู Production

### ุงูุญู ุงูุฃูุซู: ุชุณุฌูู ุงูุฏุฎูู ูุญููุงู ุฃููุงู

```bash
# 1. ุดุบู ุงูุณูุฑุงุจุฑ ูุญููุงู ูุฑุฉ ูุงุญุฏุฉ
python scraper.py

# 2. ุณูุชู ุฅูุดุงุก ููู scraper_session.session
# 3. ุงุฑูุน ุงูููู ูุฐุง ุฅูู Coolify ุนุจุฑ Volume ุฃู Secret

# ูู Coolify:
# Resources โ Secrets โ Add Secret
# Name: telegram_session
# Content: (ูุญุชูู ููู scraper_session.session)
```

### ุงูุจุฏูู: ุงุณุชุฎุฏุงู Bot Token

```python
# ุฅุฐุง ููุช ุชุฑูุฏ ุชุฌูุจ ูุดููุฉ ุงูู Session ุชูุงูุงู
# ุฃูุดุฆ Bot ุนุจุฑ @BotFather ูุฃุถู ุงูุจูุช ูููููุงุช
# ุซู ุงุณุชุฎุฏู Bot Token ุจุฏูุงู ูู User Account
```

## ๐ ูููู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ููู Backend

```json
{
  "channel_id": 123456789,
  "message_id": 12345,
  "timestamp": "2025-10-24T10:30:00",
  "description": "ููุชุฌ ุฑุงุฆุน... ุงูุณุนุฑ 299 ุฌููู ุจุฏูุง ูู 399",
  "image_urls": [
    "https://your-cdn.com/image1.jpg",
    "https://your-cdn.com/image2.jpg"
  ],
  "prices": {
    "current_price": 299,
    "old_price": 399
  }
}
```

## ๐ Workflow ุงููุงูู

```
Telegram Channels
       โ
  Scraper (Telethon)
       โ
  Extract Data (Prices, Images, Description)
       โ
  Download Images Locally
       โ
  Upload Images to Backend/CDN
       โ
  Send Product Data to Backend API
       โ
  Backend saves to Database
```

## ๐๏ธ Troubleshooting

### ุฎุทุฃ: "Could not connect to Telegram"
- ุชุฃูุฏ ูู ุงูู API credentials ุตุญูุญุฉ
- ุชุฃูุฏ ูู ุงูุฅูุชุฑูุช ูุชุตู
- ุฌุฑุจ VPN ุฅุฐุง ูุงู Telegram ูุญุฌูุจ

### ุฎุทุฃ: "Session file not found"
- ุณุฌู ุฏุฎูู ูุญููุงู ุฃููุงู
- ุงุฑูุน ููู ุงูู session ุฅูู Coolify

### ุงูุตูุฑ ูุง ุชุญูู
- ุชุฃูุฏ ูู ุงููุณุงุญุฉ ูุชููุฑุฉ
- ุชุฃูุฏ ูู ุงูู Volume ูุญุฏุฏ ุตุญ ูู Coolify

## ๐ ุชุญุณููุงุช ูุณุชูุจููุฉ

- [ ] ุฅุถุงูุฉ Queue system (Redis + Celery)
- [ ] OCR ูุงุณุชุฎุฑุงุฌ ุงูุฃุณุนุงุฑ ูู ุงูุตูุฑ
- [ ] AI ูุชุตููู ุงูููุชุฌุงุช ุชููุงุฆูุงู
- [ ] Dashboard ููุชุงุจุนุฉ ุงูุณูุฑุงุจููุฌ
- [ ] Retry mechanism ููุฑุณุงุฆู ุงููุงุดูุฉ
- [ ] Webhooks ููุฅุดุนุงุฑุงุช

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ุงูุชุญ Issue ูู ุงูู repository.
